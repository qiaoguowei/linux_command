定时器

定时器是什么？ 组织大量定时任务的模块

定时器应用
    心跳检测
        keepalive 协议栈的功能
        应用层发送心跳包
    技能冷却
    倒计时
    其他需要延时处理的功能

定时器的实现？
    两种思路：数据结构+驱动方式

    数据结构：   
    1.按照先后过期的任务进行排序, 红黑树、最小堆、跳表
        红黑树：nginx、workflow
        最小堆：libevent, libev, libuv, go
    2.按照执行序进行组织  时间轮(skynet, netty, kafka)

    驱动方式： 当前时间 与 数据结构中最小值进行比较
    1.reactor模型 io多路复用+非阻塞io  select\poll\epoll 超时时间
    2.timerfd
    3.帧更新
    4.usleep 模拟时间指针移动

怎么和别人介绍红黑树
    红黑树是平衡二叉搜索树

uint64_t 如果每秒++一亿次，需要加5800多年

c++14 等价key的概念 派生类TimerNode 等价于 基类TimerNodeBase
基类的引用同样具备多态性



时间轮
    时间指针
    时间范围

    怎么重新映射
    1.节点 tick0 + 过期时间(偏移量)
    2.tick1 - tick0 - 偏移量